<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Word Memorization</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .highlight {
      color: blue; /* Change the color as needed */
    }
    button {
      border: 1px solid black; /* Add border style */
      padding: 5px 10px; /* Add padding for better appearance */
      margin: 5px; /* Add margin for spacing between buttons */
      cursor: pointer; /* Add cursor style */
    }
    .ridge {
      border-style: ridge; /* Add ridge border style */
    }
  </style>
</head>
<body>
<a href="index.html">Home</a>
<div id="wordDisplay"></div>
<button onclick="speakTranslation()">Hear Translation</button>
<button onclick="pauseReading()">Pause Reading</button>
<button onclick="stopReading()">Stop Reading</button>
<button onclick="resetPage()">Reset</button>

<script>
  let currentWordIndex = 0;
  let isReading = false;
  let isPaused = false;
  let timeoutId;
  const dictionary = {
    "и": "and",
    "в": "in; into, to",
    "не": "not",
    "на": "on, at; onto, to",
    "я": "I",
    "он": "he",
    "что": "what, that",
    "с": "with; from, off",
    "это": "this, that, it",
    "быть": "to be; there is, there are",
    "а": "and, but (slight contrast)",
    "весь": "all",
    "они": "they",
    "она": "she",
    "как": "how, as, like",
    "мы": "we",
    "к": "towards, to",
    "у": "by; at (used in ‘have’ construction)",
    "вы": "you (polite/pl)",
    "этот": "this",
    "за": "for; behind",
    "тот": "that",
    "но": "but",
    "ты": "you (familiar)",
    "по": "along; around; according to",
    "из": "out of, from",
    "о": "about, concerning",
    "свой": "one’s own",
    "так": "so",
    "один": "one",
    "вот": "here, there (pointing)",
    "который": "which, who",
    "наш": "our",
    "только": "only",
    "ещё": "still, yet",
    "от": "from",
    "такой": "such",
    "мочь": "to be able",
    "говорить": "to speak; to have a talk, talk (to)",
    "сказать": "to say",
    "для": "for",
    "уже": "already",
    "знать": "to know",
    "да": "yes; and, but",
    "какой": "what (kind of)",
    "когда": "when",
    "другой": "different, other",
    "первый": "first",
    "чтобы": "in order to",
    "его": "his, its",
    "год": "year",
    "кто": "who",
    "дело": "matter, business",
    "нет": "no; there is no",
    "её": "her",
    "очень": "very",
    "большой": "large",
    "новый": "new",
    "становиться": "to become; to stand; p: begin",
    "работа": "work",
    "сейчас": "now, right now",
    "время": "time",
    "человек": "person",
    "идти": "to go (on foot)",
    "если": "if",
    "два": "two",
    "мой": "my",
    "жизнь": "life",
    "до": "up to; until",
    "где": "where",
    "каждый": "each, every",
    "самый": "the very, most",
    "хотеть": "to want",
    "здесь": "here",
    "надо": "it is necessary",
    "люди": "people",
    "теперь": "now",
    "дом": "house",
    "раз": "once; a time",
    "день": "day",
    "или": "or",
    "город": "town, city",
    "там": "there",
    "слово": "word",
    "глаз": "eye",
    "потом": "then, next",
    "видеть": "to see",
    "их": "their",
    "под": "under",
    "даже": "even",
    "думать": "to think",
    "хорошо": "well; it is good",
    "можно": "it is possible",
    "тут": "here (like здесь)",
    "тысяча": "thousand",
    "ли": "whether [question word]",
    "вода": "water",
    "ничто": "nothing",
    "много": "much, many, a lot",
    "рука": "hand; arm",
    "бояться": "to fear, be afraid",
    "заниматься": "to occupy oneself",
    "папа": "dad; Pope",
    "помощь": "help",
    "прошлый": "past",
    "прямо": "directly, straight",
    "лучший": "better; best",
    "мастер": "master",
    "секретарь": "secretary",
    "стена": "wall"
  };


  // Function to read out loud the provided word in the specified language
  function speakWord(word, lang) {
    const utterance = new SpeechSynthesisUtterance(word);
    utterance.lang = lang;
    speechSynthesis.speak(utterance);
    return new Promise(resolve => {
      utterance.onend = resolve;
    });
  }

  // Function to display all word pairs
  function displayWordPairs() {
    let pairsHTML = '';
    for (const russianWord in dictionary) {
      if (dictionary.hasOwnProperty(russianWord)) {
        const englishTranslation = dictionary[russianWord];
        pairsHTML += `<p>${russianWord} - ${englishTranslation}</p>`;
      }
    }
    document.getElementById("wordDisplay").innerHTML = pairsHTML;
  }

  // Function to speak the translation
  async function speakTranslation() {
    isReading = true;
    currentWordIndex = 0; // Reset the currentWordIndex to start from the beginning
    await speakNextWord();
  }

  // Function to speak the next word in the translation
  async function speakNextWord() {
    if (!isReading) return;

    const russianWords = Object.keys(dictionary);
    if (currentWordIndex >= russianWords.length) {
      isReading = false;
      return;
    }

    const russianWord = russianWords[currentWordIndex];
    const englishTranslation = dictionary[russianWord];
    const wordPairElement = document.getElementById("wordDisplay");
    const wordPairText = `${russianWord} - ${englishTranslation}`;
    const currentWordPair = wordPairElement.innerHTML;
    wordPairElement.innerHTML = currentWordPair.replace(wordPairText, `<span class="highlight">${wordPairText}</span>`);

    const paragraphs = wordPairElement.querySelectorAll('p');
    paragraphs[currentWordIndex].classList.add('ridge'); // Add ridge class to the current word

    await speakWord(russianWord, 'ru-RU');
    // Add a timeout of 100 milliseconds
    await new Promise(resolve => setTimeout(resolve, 1000));
    await speakWord(englishTranslation, 'en-US');
    currentWordIndex++;

    // Reset the highlighting
    wordPairElement.innerHTML = currentWordPair;

    // Remove ridge class from all paragraphs
    paragraphs.forEach(paragraph => {
      paragraph.classList.remove('ridge');
    });

    // Speak the next word if not paused
    if (!isPaused) {
      await speakNextWord();
    }
  }

  // Function to pause reading
  function pauseReading() {
    isPaused = !isPaused;
    if (!isPaused && isReading) {
      speakNextWord();
    }
  }

  // Function to stop reading
  function stopReading() {
    isReading = false;
    isPaused = false;
    speechSynthesis.cancel(); // Stop any ongoing speech playback
    currentWordIndex = 0;
    const wordPairElement = document.getElementById("wordDisplay");
    const currentWordPair = wordPairElement.innerHTML;
    wordPairElement.innerHTML = currentWordPair.replace('<span class="highlight">', '').replace('</span>', '');
  }

  // Function to reset the page (reload)
  function resetPage() {
    location.reload();
  }

  // Display all word pairs initially
  displayWordPairs();
</script>
</body>
</html>
